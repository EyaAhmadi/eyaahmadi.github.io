<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact | Eya Ahmadi</title>

    <!-- Styles -->
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="style-contact.css" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
        crossorigin="anonymous" />
</head>

<body class="fade-in">
    <div class="cursor"></div>

    <!-- Header -->
    <div id="header-placeholder"></div>

    <!-- SPA target content -->
    <main>
        <section class="section fade contact-page">
            <div class="contact-wrapper">

                <!-- Contact Form -->
                <!-- Contact Form -->
                <section class="contact-form">
                    <div class="form-container">
                        <h2>Get in Touch</h2>
                        <p>Have a project in mind? Send me a message and let's talk.</p>
                        <form id="contact-form">
                            <input type="text" name="from_name" placeholder="Name" required />
                            <input type="email" name="from_email" placeholder="Email" required />
                            <input type="text" name="subject" placeholder="Subject" required />
                            <textarea name="message" rows="5" placeholder="Message" required></textarea>
                            <button type="submit" id="submit-btn">
                                <span class="btn-content">
                                    <i class="fas fa-paper-plane"></i>
                                    <span class="btn-text">Send Message</span>
                                </span>
                            </button>
                        </form>
                        <div id="status-message" class="status-message"></div>
                    </div>
                </section>

                <!-- Contact Info -->
                <div class="contact-info-box">
                    <section class="contact-info">
                        <h3>Contact Information</h3>
                        <p>
                            <i class="fas fa-envelope icon-accent"></i>
                            <a href="mailto:eyaahmadi01@gmail.com" target="_blank">eyaahmadi01@gmail.com</a>
                        </p>
                        <p>
                            <i class="fab fa-github icon-accent"></i>
                            <a href="https://github.com/EyaAhmadi" target="_blank">github.com/EyaAhmadi</a>
                        </p>
                        <p>
                            <i class="fab fa-linkedin icon-accent"></i>
                            <a href="https://www.linkedin.com/in/eya-ahmadi"
                                target="_blank">linkedin.com/in/eya-ahmadi</a>
                        </p>

                        <div class="available-for">
                            <h4>Available For</h4>
                            <ul>
                                <li><i class="fas fa-check-circle icon-check"></i> AI & ML Projects</li>
                                <li><i class="fas fa-check-circle icon-check"></i> Full-Stack Development</li>
                                <li><i class="fas fa-check-circle icon-check"></i> System Architecture</li>
                                <li><i class="fas fa-check-circle icon-check"></i> Freelance Collaboration</li>
                            </ul>
                        </div>
                    </section>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <div id="footer-placeholder"></div>

    <script src="https://cdn.jsdelivr.net/npm/gsap@3"></script>
    <script src="main.js"></script>

    <script>
        fetch('header.html')
            .then(res => res.text())
            .then(data => {
                document.getElementById('header-placeholder').innerHTML = data;
                if (typeof setupThemeToggle === 'function') setupThemeToggle();
            });

        fetch('footer.html')
            .then(res => res.text())
            .then(data => {
                document.getElementById('footer-placeholder').innerHTML = data;
                if (typeof animateSections === 'function') animateSections();
            });
    </script>

    <!-- EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

    <script>
        // Initialize EmailJS with your public key
        emailjs.init("6K8rgadZGQXjtFhgD"); // Replace with your actual public key

        // Get form elements
        const form = document.getElementById('contact-form');
        const submitBtn = document.getElementById('submit-btn');
        const statusMessage = document.getElementById('status-message');
        const btnText = document.querySelector('.btn-text');
        const btnContent = document.querySelector('.btn-content');

        // Handle form submission
        form.addEventListener('submit', function (event) {
            event.preventDefault();

            // Show loading state
            submitBtn.disabled = true;
            btnText.textContent = 'Sending...';
            btnContent.insertAdjacentHTML('afterbegin', '<span class="loading-spinner"></span>');
            hideStatusMessage();

            // Send email using EmailJS
            emailjs.sendForm('service_5u2ojfv', 'template_bn0xfyj', this)
                .then(function (response) {
                    console.log('SUCCESS!', response.status, response.text);
                    showStatusMessage('✅ Message sent successfully! I\'ll get back to you soon.', 'success');
                    form.reset();
                    resetFormValidation();
                })
                .catch(function (error) {
                    console.log('FAILED...', error);
                    showStatusMessage('❌ Failed to send message. Please try again or contact me directly at eyaahmadi01@gmail.com', 'error');
                })
                .finally(function () {
                    // Reset button state
                    submitBtn.disabled = false;
                    btnText.textContent = 'Send Message';
                    const spinner = btnContent.querySelector('.loading-spinner');
                    if (spinner) {
                        spinner.remove();
                    }
                });
        });

        // Show status message
        function showStatusMessage(message, type) {
            statusMessage.textContent = message;
            statusMessage.className = `status-message ${type}`;
            statusMessage.style.display = 'block';

            // Auto-hide success messages after 5 seconds
            if (type === 'success') {
                setTimeout(hideStatusMessage, 5000);
            }
        }

        // Hide status message
        function hideStatusMessage() {
            statusMessage.style.display = 'none';
        }

        // Reset form validation classes
        function resetFormValidation() {
            const inputs = form.querySelectorAll('input, textarea');
            inputs.forEach(input => {
                input.classList.remove('error', 'success');
            });
        }

        // Enhanced form validation with visual feedback
        const inputs = form.querySelectorAll('input, textarea');
        inputs.forEach(input => {
            input.addEventListener('input', function () {
                hideStatusMessage();

                if (this.checkValidity()) {
                    this.classList.remove('error');
                    this.classList.add('success');
                } else {
                    this.classList.remove('success');
                    this.classList.add('error');
                }
            });

            input.addEventListener('blur', function () {
                if (this.value.trim() === '') {
                    this.classList.remove('error', 'success');
                }
            });
        });

        // Email validation enhancement
        const emailInput = form.querySelector('input[name="from_email"]');
        if (emailInput) {
            emailInput.addEventListener('input', function () {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (this.value && !emailRegex.test(this.value)) {
                    this.classList.add('error');
                    this.classList.remove('success');
                } else if (this.value) {
                    this.classList.remove('error');
                    this.classList.add('success');
                }
            });
        }
    </script>
</body>

</html>